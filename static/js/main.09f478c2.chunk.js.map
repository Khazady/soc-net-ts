{"version":3,"sources":["redux/dialogs-reducer.ts","components/Navbar/Navbar.module.css","components/Users/Users.module.css","assets/images/default-user-avatar.png","components/common/Preloader/Preloader.module.css","assets/images/preloader.svg","api/api.ts","components/Navbar/Navbar.tsx","components/News/News.tsx","components/Music/Music.tsx","components/Settings/Settings.tsx","redux/users-reducer.ts","components/common/Paginator/Paginator.tsx","components/Users/User.tsx","components/Users/UsersList.tsx","redux/users-selectors.ts","components/Users/UsersContainer.tsx","components/Header/Header.tsx","redux/auth-reducer.ts","components/Header/HeaderContainer.tsx","components/Login/LoginForm/LoginForm.tsx","components/Login/Login.tsx","redux/app-reducer.ts","redux/redux-store.ts","hoc/withSuspense.tsx","App.tsx","index.tsx","components/common/FormsWithValidationErrors/FormsWithValidationErrors.module.css","components/common/Preloader/Preloader.tsx","components/common/FormsWithValidationErrors/FormsWithValidationErrors.tsx","components/common/Paginator/Paginator.module.css","utils/validators.ts","components/Header/Header.module.css","hoc/withAuthRedirect.tsx","redux/profile-reducer.ts"],"names":["initialState","dialogsData","id","name","avatar","messagesData","v1","message","dialogsReducer","state","action","type","newMessage","newMessageText","filter","mess","messageId","addMessageAC","module","exports","instance","axios","create","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","followUser","userId","post","unFollowUser","delete","profileAPI","getProfile","getUserStatus","updateStatus","status","put","authAPI","me","login","email","password","rememberMe","res","logout","Navbar","className","classes","nav","item","to","activeClassName","activeLink","News","props","Music","Settings","usersData","totalUsersCount","isLoading","isFollowingInProgress","followSuccessAC","unfollowSuccessAC","toggleIsLoadingAC","toggleFollowingProgressAC","userReducer","map","u","followed","newUsersData","pageNumber","Paginator","pagesCount","Math","ceil","totalItemsCount","pages","i","push","portionCount","portionSize","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","styles","paginator","onClick","p","selectedPage","page","onPageChanger","User","user","src","photos","small","userPhoto","alt","disabled","isFollowedInProgress","some","unfollow","follow","UsersList","users","key","createSelector","usersPage","getPageSize","getTotalUsersCount","getCurrentPage","getIsLoading","getIsFollowingProgress","UsersContainer","this","Preloader","React","Component","compose","withAuthRedirect","connect","dispatch","a","resultCode","followTC","unfollowTC","toggleFollowingProgress","document","title","items","totalCount","requestUsersTC","Header","header","loginBlock","isAuth","setAuthUserDataAC","payload","getAuthUserDataTC","auth","LoginReduxForm","reduxForm","form","handleSubmit","error","onSubmit","Field","component","Input","validate","required","placeholder","formSummaryError","errorMessage","messages","length","stopSubmit","_error","formData","initialized","appReducer","reducers","combineReducers","profilePage","profileReducer","dialogsPage","app","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","withSuspense","Suspense","fallback","DialogsContainer","lazy","ProfileContainer","App","initializingApp","exact","path","render","Login","AppContainer","withRouter","promise","Promise","all","MainApp","ReactDOM","getElementById","spinnerContainer","preloader","Textarea","input","meta","hasError","touched","formControl","value","undefined","maxLengthCreator","maxLength","mapStateToPropsForRedirect","RedirectComponent","ADD_POST","postsData","likesCount","profile","newPost","newPostText","postId","addPostAC","setStatusAC","getUserProfileTC","getUserStatusTC","updateStatusTC"],"mappings":"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","file":"static/js/main.09f478c2.chunk.js","sourcesContent":["import {v1} from \"uuid\";\r\nimport {ActionsType} from \"./redux-store\";\r\n\r\n// types\r\nconst ADD_MESSAGE = \"dialogs/ADD_MESSAGE\"\r\nconst DELETE_MESSAGE = \"dialogs/DELETE_MESSAGE\"\r\nexport type DialogItemType = {\r\n    name: string;\r\n    id: number;\r\n    avatar: string\r\n};\r\nexport type MessageType = {\r\n    id: string\r\n    message: string;\r\n};\r\nexport type DialogsPageType = {\r\n    dialogsData: Array<DialogItemType>;\r\n    messagesData: Array<MessageType>;\r\n};\r\n\r\n\r\n\r\nlet initialState: DialogsPageType = {\r\n    dialogsData: [\r\n        {\r\n            id: 1,\r\n            name: \"Chris\",\r\n            avatar: \"https://upload.wikimedia.org/wikipedia/commons/9/99/Chris_Pratt_2018.jpg\"\r\n        },\r\n        {\r\n            id: 2,\r\n            name: \"Vicky\",\r\n            avatar: \"https://upload.wikimedia.org/wikipedia/commons/c/cf/Victoria_Justice_2013.jpg\"\r\n        },\r\n        {\r\n            id: 3,\r\n            name: \"Mike\",\r\n            avatar: \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/Mike_Tyson_2019_by_Glenn_Francis.jpg/1200px-Mike_Tyson_2019_by_Glenn_Francis.jpg\"\r\n        },\r\n        {\r\n            id: 4,\r\n            name: \"Alex\",\r\n            avatar: \"https://upload.wikimedia.org/wikipedia/commons/9/99/Chris_Pratt_2018.jpg\"\r\n        },\r\n        {\r\n            id: 5,\r\n            name: \"Ivan\",\r\n            avatar: \"https://upload.wikimedia.org/wikipedia/commons/9/99/Chris_Pratt_2018.jpg\"\r\n        },\r\n    ],\r\n    messagesData: [\r\n        {id: v1(), message: \"Hello\"},\r\n        {id: v1(), message: \"What's up\"},\r\n        {id: v1(), message: \"Privet\"},\r\n        {id: v1(), message: \"Yo\"},\r\n        {id: v1(), message: \"Yo\"},\r\n    ],\r\n};\r\n\r\nexport const dialogsReducer = (state: DialogsPageType = initialState, action: ActionsType): DialogsPageType => {\r\n    switch (action.type) {\r\n        case ADD_MESSAGE:\r\n            let newMessage = {id: v1(), message: action.newMessageText}\r\n            return {\r\n                ...state,\r\n                messagesData: [...state.messagesData, newMessage ]\r\n                //эта запись перезатирает shallow-копию messagesData\r\n                //массив messagesData содержит объекты, мы их глубоко не копируем, т.к. не изменяем\r\n                //dialogsData глубоко не копируем, не собираемся изменять\r\n            };\r\n        case DELETE_MESSAGE:\r\n            return {\r\n                ...state,\r\n                messagesData: state.messagesData.filter(mess => mess.id !== action.messageId)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n// actions\r\nexport const addMessageAC = (newMessageText: string) => ({type: ADD_MESSAGE, newMessageText} as const)\r\nexport const deleteMessageAC = (messageId: string) => ({type: DELETE_MESSAGE, messageId} as const)","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__3jGhs\",\"item\":\"Navbar_item__L_aKq\",\"activeLink\":\"Navbar_activeLink__NrhWw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"Users_userPhoto__2-U6B\"};","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerContainer\":\"Preloader_spinnerContainer__2hnql\"};","module.exports = __webpack_public_path__ + \"static/media/preloader.dacce764.svg\";","import axios from \"axios\";\r\n// это DAL\r\n//api pass samurai1809\r\n\r\n//для избежания дублирования кода в каждом запросе\r\n//baseURL вставляется перед каждой строкой\r\n//настройки withCredentials и headers добавляются автоматически\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: \"https://social-network.samuraijs.com/api/1.0/\",\r\n    headers: {\r\n        \"API-KEY\": \"a13d3464-2e9e-4272-8cbf-d0d1a9048e02\"\r\n    }\r\n});\r\n\r\n//для удобства разные ветки обращений сортируем по объектам\r\nexport const usersAPI = {\r\n    getUsers(currentPage: number = 1, pageSize: number = 10) {\r\n        //при get-запросе мы можем отправить на сервер только этот адрес\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n          //тут промис зен, чтобы в компоненту приходил ответ только с data\r\n          .then(response => response.data)\r\n    },\r\n    //в get и delete настройки 2 параметр, в post 3-ий\r\n    followUser(userId: string) {\r\n        return instance.post(`follow/${userId}`, {})\r\n          .then(response => response.data);\r\n    },\r\n    unFollowUser(userId: string) {\r\n        return instance.delete(`follow/${userId}`)\r\n          .then(response => response.data);\r\n    }\r\n};\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId: string) {\r\n        return instance.get(`profile/${userId}`)\r\n          .then(response => response.data)},\r\n    getUserStatus(userId: string) {\r\n        return instance.get(`profile/status/${userId}`)\r\n          .then(response => response.data)},\r\n    updateStatus(status: string) {\r\n        return instance.put(`profile/status`, {status: status})\r\n          .then(response => response.data)},\r\n}\r\n\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get(`auth/me`).then(response => response.data)\r\n    },\r\n    login(email: string, password: string, rememberMe = false) {\r\n        return instance.post('auth/login', {email, password, rememberMe}).then(res => res.data)\r\n    },\r\n    logout() {\r\n        return instance.delete('auth/login').then(response => response.data)\r\n    }\r\n}","import React from 'react';\r\nimport classes from \"./Navbar.module.css\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nfunction Navbar () {\r\n    return <nav className={classes.nav}>\r\n        <div className={classes.item}>\r\n            <NavLink to=\"/profile\" activeClassName={classes.activeLink}>Profile</NavLink>\r\n        </div>\r\n        <div className={classes.item}>\r\n            <NavLink to=\"/dialogs\" activeClassName={classes.activeLink}>Dialogs</NavLink>\r\n        </div>\r\n        <div className={classes.item}>\r\n            <NavLink to=\"/users\" activeClassName={classes.activeLink}>Users</NavLink>\r\n        </div>\r\n        <div className={classes.item}>\r\n            <NavLink to=\"/news\" activeClassName={classes.activeLink}>News</NavLink>\r\n        </div>\r\n        <div className={classes.item}>\r\n            <NavLink to=\"/music\" activeClassName={classes.activeLink}>Music</NavLink>\r\n        </div>\r\n        <div className={classes.item}>\r\n            <NavLink to=\"/settings\" activeClassName={classes.activeLink}>Settings</NavLink>\r\n        </div>\r\n    </nav>\r\n}\r\n\r\nexport default Navbar;","import React from \"react\";\r\nimport classes from \"./News.module.css\";\r\n\r\nfunction News(props: any) {\r\n  return (\r\n    <div>\r\n      News\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default News;","import React from \"react\";\r\nimport classes from \"./Music.module.css\";\r\n\r\nfunction Music(props: any) {\r\n  return (\r\n    <div>\r\n      Music\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Music;","import React from \"react\";\r\nimport classes from \"./Settings.module.css\";\r\n\r\nfunction Settings(props: any) {\r\n  return (\r\n    <div>\r\n      Settings\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Settings;","import {ActionsType} from \"./redux-store\";\r\nimport {usersAPI} from \"../api/api\";\r\n\r\n//types\r\ntype LocationType = {\r\n    country: string\r\n    city: string\r\n}\r\nexport type UsersType = {\r\n    id: string\r\n    photos: any\r\n    followed: boolean\r\n    name: string\r\n    status: string\r\n    location: LocationType\r\n}\r\nexport type UsersPageType = {\r\n    usersData: Array<UsersType>\r\n    pageSize: number\r\n    totalUsersCount: number\r\n    currentPage: number\r\n    isLoading: boolean\r\n    isFollowingInProgress: any\r\n}\r\nconst FOLLOW = \"user/FOLLOW\";\r\nconst UNFOLLOW = \"user/UNFOLLOW\";\r\nconst SET_USERS = \"user/SET-USERS\";\r\nconst SET_CURRENT_PAGE = \"user/SET-CURRENT-PAGE\"\r\nconst SET_TOTAL_USERS_COUNT = \"user/SET-TOTAL-USERS-COUNT\"\r\nexport const TOGGLE_IS_LOADING = \"user/TOGGLE-IS-LOADING\"\r\nconst TOGGLE_FOLLOWING_PROGRESS = \"user/TOGGLE_FOLLOWING_PROGRESS\"\r\n\r\nlet initialState: UsersPageType = {\r\n    usersData: [],\r\n    pageSize: 10,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isLoading: false,\r\n    isFollowingInProgress: []\r\n};\r\nconst userReducer = (state: UsersPageType = initialState, action: ActionsType): UsersPageType => {\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            //этот мап делает копию только того юзера, который нужно изменить, остальное ссылки (Shallow)\r\n            return {\r\n                ...state,\r\n                usersData: state.usersData.map(u => {\r\n                    if (u.id === action.userId) {\r\n                        //делаем копию только того юзера, которого меняем\r\n                        return {...u, followed: true}\r\n                    }\r\n                    return u;\r\n                })\r\n            }\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,\r\n                usersData: state.usersData.map(u => {\r\n                    if (u.id === action.userId) {\r\n                        return {...u, followed: false}\r\n                    }\r\n                    return u;\r\n                })\r\n            }\r\n        case SET_USERS: {\r\n\r\n            //Дополняет инитстейт новыми юзерами, приходящими с сервака по нажатию кнопки show more\r\n            return {\r\n                ...state,\r\n                usersData: action.newUsersData\r\n            }\r\n        }\r\n        case SET_CURRENT_PAGE: {\r\n            return {...state, currentPage: action.pageNumber}\r\n        }\r\n        case SET_TOTAL_USERS_COUNT: {\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.totalUsersCount\r\n            }\r\n        }\r\n        case TOGGLE_IS_LOADING: {\r\n            return {\r\n                ...state,\r\n                isLoading: action.isLoading\r\n            }\r\n        }\r\n        case TOGGLE_FOLLOWING_PROGRESS: {\r\n            return {\r\n                ...state,\r\n                isFollowingInProgress: action.isFollowingInProgress\r\n                    //если в action isFollowing true, то в конец массива айдишек(которые были нажаты) дописываем айди из action\r\n                    ? [...state.isFollowingInProgress, action.userId]\r\n                    //если false, то деструкт. не нужна, фильтр возвр. новый массив\r\n                    //удаляет из массивы обрабатывающихся id, ту, что закончила обработку\r\n                    : [state.isFollowingInProgress.filter((id: string) => id !== action.userId)]\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n// actions\r\nexport const followSuccessAC = (userId: string) => ({type: FOLLOW, userId} as const)\r\nexport const unfollowSuccessAC = (userId: string) => ({type: UNFOLLOW, userId: userId} as const)\r\nexport const setUsersAC = (newUsersData: Array<UsersType>) => ({type: SET_USERS, newUsersData} as const)\r\nexport const setCurrentPageAC = (pageNumber: number) => ({type: SET_CURRENT_PAGE, pageNumber: pageNumber} as const)\r\nexport const setTotalUsersCountAC = (totalUsersCount: number) => ({\r\n    type: SET_TOTAL_USERS_COUNT,\r\n    totalUsersCount\r\n} as const)\r\nexport const toggleIsLoadingAC = (isLoading: boolean) => ({type: TOGGLE_IS_LOADING, isLoading} as const)\r\nexport const toggleFollowingProgressAC = (isFollowingInProgress: boolean, userId: string) => ({\r\n    type: TOGGLE_FOLLOWING_PROGRESS,\r\n    isFollowingInProgress,\r\n    userId\r\n} as const)\r\n\r\n// thunks\r\n//AC возвращает объект, кот. мы можем задиспатчить, ThunkCreator возвр. функцию кот. мы можем задиспатчить\r\nexport const requestUsersTC = (currentPage: number, pageSize: number) =>\r\n    async (dispatch: any) => {\r\n        document.title = \"Users\";\r\n        //включаем крутилку до запроса на серв\r\n        dispatch(toggleIsLoadingAC(true));\r\n        let response = await usersAPI.getUsers(currentPage, pageSize)\r\n        //после ответа сервера выполнится этот код\r\n        dispatch(setCurrentPageAC(currentPage))\r\n        dispatch(setUsersAC(response.items));\r\n        dispatch(setTotalUsersCountAC(response.totalCount));\r\n        //выключаем после получения ответа\r\n        dispatch(toggleIsLoadingAC(false));\r\n    }\r\n\r\nexport const followTC = (userId: string) =>\r\n    async (dispatch: any) => {\r\n        //меняет в стейте дизаблед кнопки на тру\r\n        dispatch(toggleFollowingProgressAC(true, userId));\r\n        let response = await usersAPI.followUser(userId)\r\n        if (response.resultCode === 0) {\r\n            dispatch(followSuccessAC(userId))\r\n        }\r\n        //разблочивает кнопку после запроса\r\n        dispatch(toggleFollowingProgressAC(false, userId))\r\n    }\r\n\r\nexport const unfollowTC = (userId: string) =>\r\n    async (dispatch: any) => {\r\n        //меняет в стейте дизаблед кнопки на тру\r\n        dispatch(toggleFollowingProgressAC(true, userId));\r\n        //дожидаемся когда промис придет в состояние resolved\r\n        let response = await usersAPI.unFollowUser(userId)\r\n        if (response.resultCode === 0) {\r\n            dispatch(unfollowSuccessAC(userId))\r\n        }\r\n        //разблочивает кнопку после запроса\r\n        dispatch(toggleFollowingProgressAC(false, userId))\r\n    }\r\n\r\nexport default userReducer;","import styles from \"./Paginator.module.css\";\r\nimport React, {useState} from \"react\";\r\n\r\nexport type PaginatorPropsType = {\r\n    totalItemsCount: number\r\n    pageSize: number\r\n    currentPage: number\r\n    onPageChanger: (page: number) => void\r\n    portionSize: number\r\n}\r\n\r\nexport const Paginator: React.FC<PaginatorPropsType> = (props) => {\r\n    //логика для визуала, поэтому она в презентационной компоненте\r\n    //делим общее количество юзеров на то, сколько их будет в 1 порции, получаем количество страниц\r\n    let pagesCount = Math.ceil(props.totalItemsCount / props.pageSize);\r\n    //массив с нумерацией страниц\r\n    let pages = [];\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i)\r\n    }\r\n    //количество порций = количество страниц / размер порции\r\n    let portionCount = Math.ceil(pagesCount / props.portionSize)\r\n    //локал стейт для кнопок prev/next для переключения порций\r\n    let [portionNumber, setPortionNumber] = useState(1)\r\n    //находим левую/правую пограничную страницу в порции\r\n    let leftPortionPageNumber = (portionNumber - 1) * props.portionSize + 1;\r\n    let rightPortionPageNumber = portionNumber * props.portionSize;\r\n\r\n    return (\r\n      <div className={styles.paginator}>\r\n          {// если номер показываемой порции больше 1, то показать кнопку Prev с онкликом изменить номер показываемой порции на -1\r\n              portionNumber > 1\r\n                ? <button onClick={() => setPortionNumber(portionNumber - 1)}>Previous</button>\r\n                : null}\r\n          {pages\r\n            //находим нужную порцию по пограничным страницам порции\r\n            .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n            .map(p =>\r\n              <span className={props.currentPage === p ? styles.selectedPage : styles.page}\r\n                    onClick={() => {\r\n                        props.onPageChanger(p)\r\n                    }}>{p}</span>\r\n            )}\r\n          {//если общее количество порций больше, чем текущая порция, то показать кнопку Next\r\n              // с онкликом изменить номер показываемой порции на +1\r\n              portionCount > portionNumber\r\n                ? <button onClick={() => setPortionNumber(portionNumber + 1)}>Next</button>\r\n                : null}\r\n      </div>\r\n    )\r\n}","import styles from \"./Users.module.css\";\r\nimport userPhoto from \"../../assets/images/default-user-avatar.png\";\r\nimport React from \"react\";\r\nimport {UsersType} from \"../../redux/users-reducer\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nexport type UserPropsType = {\r\n    user: UsersType\r\n    follow: any\r\n    unfollow: any\r\n    isFollowedInProgress: string[]\r\n}\r\n\r\nexport const User: React.FC<UserPropsType> = ({user, ...props}) => (\r\n    <div>\r\n                <span>\r\n                    <div>\r\n                        <NavLink to={\"/profile/\" + user.id}>\r\n                            <img\r\n                                src={\r\n                                    /*если фото отсутствует, то стандартная картинка*/\r\n                                    user.photos.small != null ? user.photos.small : userPhoto}\r\n                                className={styles.userPhoto}\r\n                                alt={\"avatar\"}/>\r\n                        </NavLink>\r\n                    </div>\r\n                    <div>\r\n                        {user.followed ?\r\n                            //если хоть кто-то из массива обрабатывающихся id совпадает с user id по которым мапимся, то true в disabled\r\n                            <button disabled={props.isFollowedInProgress.some((id: string) => id === user.id)}\r\n                                    onClick={() => {\r\n                                        //меняет в стейте дизаблед кнопки на тру\r\n                                        props.unfollow(user.id)\r\n                                    }}>Unfollow</button>\r\n                            : <button disabled={props.isFollowedInProgress.some((id: string) => id === user.id)}\r\n                                      onClick={() => {\r\n                                          props.follow(user.id)\r\n                                      }}>Follow</button>\r\n                        }</div>\r\n                        </span>\r\n        <span>\r\n                        <span>\r\n                        <div>{user.name}</div>\r\n                        <div>{user.status}</div>\r\n                        </span>\r\n                        <span>\r\n                        <div>{\"u.location.city\"}</div>\r\n                        <div>{\"u.location.country\"}</div>\r\n                        </span>\r\n\r\n            {/*<button onClick={() => {*/}\r\n            {/*    this.props.setUsers()*/}\r\n            {/*}}>Show more</button>*/}\r\n\r\n                        </span>\r\n    </div>\r\n)","import React from \"react\";\r\nimport {UsersType} from \"../../redux/users-reducer\";\r\nimport {Paginator} from \"../common/Paginator/Paginator\";\r\nimport {User} from \"./User\";\r\n\r\nexport type UsersListPropsType = {\r\n    users: Array<UsersType>\r\n    follow: any\r\n    unfollow: any\r\n    isFollowedInProgress: string[]\r\n    onPageChanger: (page: number) => void\r\n    totalUsersCount: number\r\n    pageSize: number\r\n    currentPage: number\r\n}\r\n\r\nexport const UsersList: React.FC<UsersListPropsType> = (props) => (\r\n  <div>\r\n      <Paginator totalItemsCount={props.totalUsersCount}\r\n                 pageSize={props.pageSize}\r\n                 currentPage={props.currentPage}\r\n                 onPageChanger={props.onPageChanger}\r\n                 portionSize={10}/>\r\n      {\r\n          props.users.map(u => <User key={u.id}\r\n                                     user={u}\r\n                                     isFollowedInProgress={props.isFollowedInProgress}\r\n                                     follow={props.follow} unfollow={props.unfollow}/>\r\n          )\r\n      }\r\n  </div>\r\n)","//функция кот принимает State целиком, достает только то, что нужно компоненте и передаёт это в бизнес в mStP\r\n//это нужно, чтобы мы решим изменить архитектуру стейта, чтобы не исправлять в каждом mStP, мы исправим в 1 месте - здесь\r\nimport {RootStateType} from \"./redux-store\";\r\nimport {createSelector} from \"reselect\"\r\n\r\n//примитивный селектор\r\nexport const getUsersSelector = (state: RootStateType) => state.usersPage.usersData\r\n//селектор с вычислениями, reselect предотвращает перерисовку ( useMemo ), кэшируя её значения и пересчитывает только при измен. в getUsersSelector\r\nexport const getUsers = createSelector(getUsersSelector, (users) => users.filter(u => true))\r\nexport const getPageSize = (state: RootStateType) => {\r\n    return state.usersPage.pageSize\r\n}\r\nexport const getTotalUsersCount = (state: RootStateType) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\nexport const getCurrentPage = (state: RootStateType) => {\r\n    return state.usersPage.currentPage\r\n}\r\nexport const getIsLoading = (state: RootStateType) => {\r\n    return state.usersPage.isLoading\r\n}\r\nexport const getIsFollowingProgress = (state: RootStateType) => {\r\n    return state.usersPage.isFollowingInProgress\r\n}","import {connect} from \"react-redux\";\r\nimport {RootStateType} from \"../../redux/redux-store\";\r\nimport {\r\n    UsersType,\r\n    toggleFollowingProgressAC, requestUsersTC, unfollowTC, followTC\r\n} from \"../../redux/users-reducer\";\r\nimport React from \"react\";\r\nimport {UsersList} from \"./UsersList\";\r\nimport { Preloader } from \"../common/Preloader/Preloader\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport { compose } from \"redux\";\r\nimport {\r\n    getCurrentPage,\r\n    getPageSize,\r\n    getTotalUsersCount,\r\n    getUsers,\r\n    getIsLoading,\r\n    getIsFollowingProgress\r\n} from \"../../redux/users-selectors\";\r\n\r\n//пропсы берутся из объекта, сформированного функцией connect ниже\r\ntype UserContainerProps = {\r\n    users: Array<UsersType>\r\n    currentPage: number\r\n    totalUsersCount: number\r\n    pageSize: number\r\n    isLoading: boolean\r\n    follow: any\r\n    unfollow: any\r\n    toggleFollowingProgress: (isFollowingInProgress: boolean, userId: string) => void\r\n    isFollowingInProgress: string[]\r\n    getUsers: any\r\n}\r\n\r\nclass UsersContainer extends React.Component<UserContainerProps, any> {\r\n    componentDidMount() {\r\n        //вызываем санку\r\n        this.props.getUsers(this.props.currentPage, this.props.pageSize)\r\n    }\r\n\r\n    onPageChanger = (currentPage: number) => {\r\n        this.props.getUsers(currentPage, this.props.pageSize);\r\n    }\r\n\r\n    render() {\r\n        //после return --- если идет запрос на сервак, то отобразить крутилку\r\n        return <>\r\n            {this.props.isLoading ? <Preloader/> : null}\r\n            <UsersList totalUsersCount={this.props.totalUsersCount}\r\n                       pageSize={this.props.pageSize}\r\n                       currentPage={this.props.currentPage}\r\n                       follow={this.props.follow}\r\n                       unfollow={this.props.unfollow}\r\n                       onPageChanger={this.onPageChanger}\r\n                       users={this.props.users}\r\n                       isFollowedInProgress={this.props.isFollowingInProgress}\r\n                    />\r\n        </>\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state: RootStateType) => {\r\n    //принимает стейт целиком, а возвращает только то, что нужно компоненте\r\n    //выбираем стейт в селекторах, чтобы если что не менять все mstp, а поменять в 1 селекторе\r\n    return {\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isLoading: getIsLoading(state),\r\n        isFollowingInProgress: getIsFollowingProgress(state)\r\n    }\r\n}\r\nlet mapDispatchToProps = (dispatch: (action: any) => void) => {\r\n    //передает в пропсах презентационной компоненте коллбеки, которая она может вызывать\r\n    return {\r\n        follow: (userId: string) => {\r\n            debugger\r\n            //диспатчит результат работы AC\r\n            dispatch(followTC(userId))\r\n        },\r\n        unfollow: (userId: string) => {\r\n            dispatch(unfollowTC(userId))\r\n        },\r\n        toggleFollowingProgress: (isFollowingInProgress: boolean, userId: string) => {\r\n            dispatch(toggleFollowingProgressAC(isFollowingInProgress, userId))\r\n        },\r\n        getUsers: (currentPage: number, pageSize: number) => {\r\n            dispatch(requestUsersTC(currentPage, pageSize))\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default compose(\r\n  withAuthRedirect,\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(UsersContainer)\r\n","import React from 'react';\r\nimport classes from \"./Header.module.css\";\r\nimport { NavLink } from 'react-router-dom';\r\nimport {HeaderContainerPropsType} from \"./HeaderContainer\";\r\n\r\nfunction Header(props: HeaderContainerPropsType) {\r\n    return <header className={classes.header}>\r\n        <img src=\"https://i.ibb.co/HN350sc/70a3b023-88a2-4ebb-a063-784ca54ae184-200x200.png\" alt=\"logo\"/>\r\n\r\n        <div className={classes.loginBlock}>\r\n            {props.isAuth\r\n              ? <div>{props.login} - <button onClick={props.logout}>Log Out</button></div> :\r\n              //показываем имя пользователя либо ссылку на страницу логина\r\n              <NavLink to={\"/login\"}>Login</NavLink>\r\n            }\r\n        </div>\r\n    </header>\r\n}\r\n\r\nexport default Header;","import {ActionsType} from \"./redux-store\";\r\nimport {authAPI} from \"../api/api\";\r\nimport {Dispatch} from \"redux\";\r\nimport {stopSubmit} from \"redux-form\";\r\nimport {TOGGLE_IS_LOADING} from \"./users-reducer\";\r\n\r\n// types\r\nexport type AuthType = {\r\n    userId: number | null\r\n    email: string | null\r\n    login: string | null\r\n    isLoading: boolean\r\n    isAuth: boolean\r\n}\r\nconst SET_USER_DATA = \"auth/SET_USER_DATA\"\r\ntype ResponseData = {\r\n    resultCode: number,\r\n    data: {\r\n        id: number | null\r\n        login: string | null\r\n        email: string | null\r\n    }\r\n}\r\n\r\nlet initialState: AuthType = {\r\n    userId: null,\r\n    email: null,\r\n    login: null,\r\n    isLoading: false,\r\n    isAuth: false\r\n};\r\nexport const authReducer = (state: AuthType = initialState, action: ActionsType): AuthType => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA: {\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n        }\r\n        case TOGGLE_IS_LOADING: {\r\n            return {\r\n                ...state,\r\n                isLoading: action.isLoading\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const setAuthUserDataAC = (userId: number | null, email: string | null, login: string | null, isAuth: boolean) =>\r\n  ({type: SET_USER_DATA, payload: {userId, email, login, isAuth}} as const)\r\n\r\n\r\nexport const getAuthUserDataTC = () =>\r\n  async (dispatch: Dispatch) => {\r\n      //возвращаем промис внаружу, диспатч TC вернет этот промис в app-reducer\r\n      let response: ResponseData = await authAPI.me()\r\n      if (response.resultCode === 0) {\r\n          let {id, email, login} = response.data;\r\n          //axios упаковывает в data и разраб сервера упаковал в data\r\n          dispatch(setAuthUserDataAC(id, email, login, true))\r\n      }\r\n  }\r\nexport const loginTC = (email: string, password: string, rememberMe: boolean) =>\r\n  async (dispatch: Dispatch<any>) => {\r\n      let response = await authAPI.login(email, password, rememberMe);\r\n      if (response.resultCode === 0) {\r\n          //запускаем санку получения данных юзера с серва, если успешная логинизация\r\n          dispatch(getAuthUserDataTC())\r\n      } else {\r\n          //если resultCode !== 0, то останавливаем сабмит формы\r\n          //проверяем не пустой ли массив с сообщ. об ошибке\r\n          let errorMessage = response.messages.length > 0 ? response.messages[0] : \"Unknown error\"\r\n          //1 арг. название именно <form/>, вторым объект с проблемным полем (_error для всех сразу field)\r\n          dispatch(stopSubmit(\"login\", {_error: errorMessage}))\r\n      }\r\n  }\r\nexport const logoutTC = () => async (dispatch: Dispatch) => {\r\n    let response = await authAPI.logout()\r\n    if (response.resultCode === 0) {\r\n        //удаляем всю информацю из стейта о юзере в исходное состояние (initState)\r\n        dispatch(setAuthUserDataAC(null, null, null, false))\r\n    }\r\n}","import React from 'react';\r\nimport Header from \"./Header\";\r\nimport {connect} from 'react-redux';\r\nimport {RootStateType} from \"../../redux/redux-store\";\r\nimport {logoutTC} from \"../../redux/auth-reducer\";\r\n\r\n\r\nexport type HeaderContainerPropsType = {\r\n    isAuth: boolean\r\n    isLoading: boolean\r\n    login: string | null\r\n    logout: () => void\r\n}\r\n\r\nconst HeaderContainer: React.FC<HeaderContainerPropsType> = (props) => {\r\n    return <Header {...props}/>\r\n};\r\n\r\nconst mapStateToProps = (state: RootStateType) => ({\r\n    isAuth: state.auth.isAuth,\r\n    isLoading: state.auth.isLoading,\r\n    login: state.auth.login\r\n})\r\n\r\nexport default connect(mapStateToProps, {logout: logoutTC})(HeaderContainer);","//типизация redux-form\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport React from \"react\";\r\nimport {Input} from \"../../common/FormsWithValidationErrors/FormsWithValidationErrors\";\r\n//validator for Field from another file\r\nimport {required} from \"../../../utils/validators\";\r\nimport { LoginFormData } from \"../Login\";\r\nimport classes from \"./../../common/FormsWithValidationErrors/FormsWithValidationErrors.module.css\";\r\n//деструктуризация пропсов, достаем из них нужные айтемы, чтобы постоянно не писать props.error\r\nconst LoginForm: React.FC<InjectedFormProps<LoginFormData>> = ({handleSubmit, error}) => (\r\n  //handleSubmit прокинул HOC, он делает e.preventDefault, передает значения из инпутов наверх упакуя в объект\r\n  <form onSubmit={handleSubmit}>\r\n      <div><Field component={Input} validate={[required]} name=\"email\" placeholder=\"Email\" type='email'/></div>\r\n      <div><Field component={Input} validate={[required]} name=\"password\" placeholder=\"Password\" type='password'/></div>\r\n      <div><Field component={Input} name=\"rememberMe\" type=\"checkbox\"/> remember me</div>\r\n      {error && <div className={classes.formSummaryError}>{error}</div>}\r\n      <div>\r\n          <button>Login</button>\r\n      </div>\r\n  </form>\r\n)\r\n//HOC, оборачиваем им форму\r\nexport const LoginReduxForm = reduxForm<LoginFormData>({\r\n    //имя для этой формы\r\n    form: 'login'\r\n})(LoginForm)","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {loginTC} from \"../../redux/auth-reducer\";\r\nimport {LoginReduxForm} from \"./LoginForm/LoginForm\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport {RootStateType} from \"../../redux/redux-store\";\r\n\r\nexport type LoginFormData = {\r\n    email: string,\r\n    password: string,\r\n    rememberMe: boolean\r\n}\r\n\r\nconst Login = (props: any) => {\r\n    //сюда придет инфа по инпутам, собранная handleSubmit {login: 'что ввел', rememberMe: true} и тд\r\n    const onSubmit = (formData: LoginFormData) => {\r\n        props.login(formData.email, formData.password, formData.rememberMe)\r\n    }\r\n\r\n    if(props.isAuth) {\r\n        return <Redirect to={\"/profile\"}/>\r\n    }\r\n    return <div>\r\n        <h1>LOGIN</h1>\r\n        <LoginReduxForm onSubmit={onSubmit}/>\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state: RootStateType) => ({\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport default connect(mapStateToProps, {login: loginTC})(Login);\r\n","import {ActionsType} from \"./redux-store\";\r\nimport {getAuthUserDataTC} from \"./auth-reducer\";\r\n\r\n// types\r\nconst INITIALIZING_SUCCESS = \"app/INITIALIZING_SUCCESS\"\r\n\r\n\r\nlet initialState = {initialized: false};\r\n\r\nconst appReducer = (state = initialState, action: ActionsType) => {\r\n    switch (action.type) {\r\n        case INITIALIZING_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n// actions\r\nexport const setInitializingSuccessAC = () => ({type: INITIALIZING_SUCCESS} as const)\r\n\r\n// thunks\r\nexport const initializeAppTC = () =>  {\r\n    return (dispatch: any) => {\r\n        //dispatch Не только что-то диспатчит, но и умеет возвращать что-то, что напишем в ретурне санки(или async await сам по себе ретурнит его??)\r\n        let promise = dispatch(getAuthUserDataTC())\r\n        //all ждет пока зарезолвятся все промисы из массива\r\n        Promise.all([promise])\r\n          .then(() => {\r\n              //когда приходит инфа о том, что юзер авторизован(или нет), диспатчим в бизнес initialSuccess\r\n              dispatch(setInitializingSuccessAC())\r\n          })\r\n    }\r\n}\r\n\r\nexport default appReducer;","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport {addPostAC, deletePostAC, profileReducer, setProfileAC, setStatusAC} from \"./profile-reducer\";\r\nimport {addMessageAC, deleteMessageAC, dialogsReducer} from \"./dialogs-reducer\";\r\nimport userReducer, {\r\n    followSuccessAC,\r\n    setCurrentPageAC,\r\n    setTotalUsersCountAC,\r\n    setUsersAC,\r\n    toggleFollowingProgressAC,\r\n    toggleIsLoadingAC,\r\n    unfollowSuccessAC,\r\n} from \"./users-reducer\";\r\nimport {authReducer, setAuthUserDataAC} from \"./auth-reducer\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport {reducer as formReducer} from 'redux-form'\r\nimport appReducer, {setInitializingSuccessAC} from \"./app-reducer\";\r\n\r\nexport type RootStateType = ReturnType<typeof reducers>\r\nexport type ActionsType =\r\n//автоматическая типизация ActionCreator, добавить as const и убрать типизацию того, что выходит из функции(после кавычек)\r\n  ReturnType<typeof addPostAC> |\r\n  ReturnType<typeof addMessageAC> |\r\n  ReturnType<typeof followSuccessAC> |\r\n  ReturnType<typeof unfollowSuccessAC> |\r\n  ReturnType<typeof setUsersAC> |\r\n  ReturnType<typeof setCurrentPageAC> |\r\n  ReturnType<typeof setTotalUsersCountAC> |\r\n  ReturnType<typeof toggleIsLoadingAC> |\r\n  ReturnType<typeof setProfileAC> |\r\n  ReturnType<typeof setAuthUserDataAC> |\r\n  ReturnType<typeof toggleFollowingProgressAC> |\r\n  ReturnType<typeof setStatusAC> |\r\n  ReturnType<typeof setInitializingSuccessAC> |\r\n  ReturnType<typeof deletePostAC> |\r\n  ReturnType<typeof deleteMessageAC>\r\n\r\nlet reducers = combineReducers({\r\n    //этот объект воспринимать как state\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    usersPage: userReducer,\r\n    auth: authReducer,\r\n    app: appReducer,\r\n    //redux-form\r\n    form: formReducer\r\n});\r\n\r\n//store for ReduxDevTools\r\n//расширение добавит в глобальный window __REDUX_D.., если его нет то обычный compose\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(reducers,composeEnhancers( applyMiddleware(thunkMiddleware)));\r\n\r\n//обычный стор\r\n//export let store: Store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\n\r\n\r\n//нужно для того, чтобы видеть store в консоли\r\n// @ts-ignore\r\nwindow.store = store;","import React from 'react'\r\nimport {Preloader} from \"../components/common/Preloader/Preloader\";\r\n\r\n//HOC возвращает новую компоненту, а не JSX\r\nexport const withSuspense = (Component: any) => {\r\n    //для lazy, в fallback указываем компоненту, кот. будет показываться пока ждем загрузки\r\n    return (props: any) => <React.Suspense fallback={<Preloader/>}>\r\n        <Component {...props}/>\r\n    </React.Suspense>\r\n}\r\n\r\n","import React from 'react';\r\nimport './App.css';\r\nimport Navbar from './components/Navbar/Navbar';\r\nimport News from \"./components/News/News\";\r\nimport Music from \"./components/Music/Music\";\r\nimport Settings from \"./components/Settings/Settings\";\r\nimport {BrowserRouter, Route, withRouter} from 'react-router-dom';\r\nimport UsersContainer from './components/Users/UsersContainer';\r\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\r\nimport Login from './components/Login/Login';\r\nimport {connect, Provider} from 'react-redux';\r\nimport {initializeAppTC} from \"./redux/app-reducer\";\r\nimport {RootStateType, store} from \"./redux/redux-store\";\r\nimport {Preloader} from \"./components/common/Preloader/Preloader\";\r\nimport {compose} from \"redux\";\r\nimport {withSuspense} from \"./hoc/withSuspense\";\r\n\r\n//компонента не попадает в бандл(вебпак собирает все файлы в 1), она будет в своем бандле и только когда она не понадобится\r\n//это ускоряет стартовую загрузку, но медленнее, когда перейдем к этой компоненте\r\nconst DialogsContainer = React.lazy(() => import(\"./components/Dialogs/DialogsContainer\"));\r\nconst ProfileContainer = React.lazy(() => import(\"./components/Profile/ProfileContainer\"));\r\n\r\n\r\ntype AppPropsType = {\r\n    initialized: boolean\r\n    initializingApp: () => void\r\n}\r\n\r\nclass App extends React.Component<AppPropsType> {\r\n    componentDidMount() {\r\n        this.props.initializingApp()\r\n    }\r\n\r\n    render() {\r\n        //В Profile /:userId параметр для пропсов withRouter (60 Выпуск)\r\n        // ? после userId делает параметр опциональным, поэтому если в url его не будет, загрузится другой профиль(указан в коде компоненты)\r\n        return !this.props.initialized\r\n          ? <Preloader/>\r\n          : (\r\n            <div className='app-wrapper'>\r\n                <HeaderContainer/>\r\n                <Navbar/>\r\n                <div className=\"app-wrapper-content\">\r\n                    <Route exact path=\"/dialogs\"\r\n                           render={withSuspense(DialogsContainer)}/>\r\n                    <Route path=\"/profile/:userId?\"\r\n                           render={withSuspense(ProfileContainer)}/>\r\n                    <Route path=\"/users\"\r\n                           render={() => <UsersContainer/>}/>\r\n                    <Route path=\"/news\" component={News}/>\r\n                    <Route path=\"/music\" component={Music}/>\r\n                    <Route path=\"/settings\" component={Settings}/>\r\n\r\n                    <Route path=\"/login\" component={Login}/>\r\n                </div>\r\n            </div>\r\n          )\r\n          ;\r\n    }\r\n}\r\n\r\n// connect redux\r\nconst mapStateToProps = (state: RootStateType) => ({\r\n    initialized: state.app.initialized\r\n})\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n    initializingApp: () => dispatch(initializeAppTC())\r\n})\r\n\r\nlet AppContainer: any = compose(\r\n  withRouter,\r\n  connect(mapStateToProps, mapDispatchToProps))(App)\r\n\r\n//чтобы работали тесты App\r\nexport const MainApp = () => (\r\n  <BrowserRouter>\r\n      <Provider store={store}>\r\n          <AppContainer/>\r\n      </Provider>\r\n  </BrowserRouter>\r\n)","import './index.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {MainApp} from './App';\r\n\r\nReactDOM.render(\r\n    <MainApp/>,\r\n    document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\n//serviceWorker.unregister();","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsWithValidationErrors_formControl__8VE6q\",\"error\":\"FormsWithValidationErrors_error__3I0hX\",\"formSummaryError\":\"FormsWithValidationErrors_formSummaryError__68DeX\"};","import styles from \"./Preloader.module.css\"\r\nimport preloader from \"../../../assets/images/preloader.svg\";\r\nimport React from \"react\";\r\n\r\nexport function Preloader() {\r\n    return <div className={styles.spinnerContainer}>\r\n        <img src={preloader} alt={\"Preloader spinner\"}/>\r\n    </div>;\r\n}","import React from \"react\"\r\nimport classes from \"./FormsWithValidationErrors.module.css\"\r\n\r\n//rest оператор, деструктуризацией достаем инпут, мета, а остальное оставить в пропсы\r\nexport const Textarea = ({input, meta, ...props}: any) => {\r\n    //если был в фокусе и не проходит валидатор.тс (в meta.error текст ошибки, либо null/undefined)\r\n    const hasError = meta.touched && meta.error\r\n    return <div className={classes.formControl + \" \" + (hasError ? classes.error : \"\")}>\r\n        <textarea {...input} {...props}/>\r\n        {hasError && <span>{meta.error}</span>}\r\n    </div>\r\n}\r\n\r\nexport const Input = ({input, meta, ...props}: any) => {\r\n    //если был в фокусе и не проходит валидатор.тс (в meta.error текст ошибки, либо null/undefined)\r\n    const hasError = meta.touched && meta.error\r\n    return <div className={classes.formControl + \" \" + (hasError ? classes.error : \"\")}>\r\n        <input {...input} {...props}/>\r\n        {hasError && <span>{meta.error}</span>}\r\n    </div>\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__2TTw3\",\"page\":\"Paginator_page__IO0Pt\",\"selectedPage\":\"Paginator_selectedPage__1Iz0d\"};","//если пришло value, то undefined, else string\r\nexport const required = (value: string) => value ? undefined : \"Field is required\"\r\n\r\n/* !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\nт.к. не мы вызываем внутреннюю функцию, передать в неё помимо value maxLength вторым параметром нельзя, поэтому\r\nоборачиваем в функцию обертку и передаем в неё параметр\r\n(ЗАМЫКАНИЕ - фун возвр другую фун и эта внутренняя фун может юзать параметры(переменные и т.д.) внешней функции) */\r\nexport const maxLengthCreator = (maxLength: number) => {\r\n    return (value: string) => value.length > maxLength ? `Max length is ${maxLength} symbols` : undefined\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2wm1e\",\"loginBlock\":\"Header_loginBlock__1Oxrs\"};","import React from 'react'\r\nimport {Redirect} from 'react-router-dom'\r\nimport {RootStateType} from \"../redux/redux-store\";\r\nimport {connect} from \"react-redux\";\r\nimport {MapStateToPropsForRedirectType} from '../components/Profile/ProfileContainer';\r\n\r\n//берет только то, что нужно redirect, чтобы сделать его уникальным\r\nlet mapStateToPropsForRedirect = (state: RootStateType): MapStateToPropsForRedirectType => ({\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\n// Обертвываем приходящую компоненту в логику с Redirect\r\nexport const withAuthRedirect = (Component: any) => {\r\n    class RedirectComponent extends React.Component<any, any> {\r\n        render() {\r\n            //если не залогинен, то редирект на логин\r\n            if (!this.props.isAuth) return <Redirect to='/login'/>\r\n            //возвращаем пришедший компонент с его пропсами\r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n\r\n    //юзаем коннект только с половиной стейта\r\n    return connect(mapStateToPropsForRedirect)(RedirectComponent)\r\n}","import {v1} from \"uuid\";\r\nimport {ActionsType} from \"./redux-store\";\r\nimport {profileAPI} from \"../api/api\";\r\nimport {Dispatch} from \"redux\";\r\n\r\n// types\r\nconst ADD_POST = 'profile/ADD_POST'\r\nconst DELETE_POST = 'profile/DELETE_POST'\r\nconst SET_PROFILE = 'profile/SET_PROFILE'\r\nconst SET_STATUS = 'profile/SET_STATUS'\r\nexport type PostTypes = {\r\n    id: string\r\n    message: string;\r\n    likesCount: number;\r\n};\r\nexport type ProfilePageType = {\r\n    postsData: Array<PostTypes>;\r\n    profile: any\r\n    status: string\r\n};\r\n\r\nlet initialState: ProfilePageType = {\r\n    postsData: [\r\n        {id: v1(), message: \"Hi, how are you?\", likesCount: 7},\r\n        {id: v1(), message: \"It's my first post\", likesCount: 53},\r\n        {id: v1(), message: \"КУ\", likesCount: 3},\r\n    ],\r\n    profile: null,\r\n    status: \"\"\r\n};\r\n\r\nexport const profileReducer = (state: ProfilePageType = initialState, action: ActionsType): ProfilePageType => {\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            let newPost = {id: v1(), message: action.newPostText, likesCount: 0};\r\n            return {\r\n                ...state,\r\n                postsData: [...state.postsData, newPost]\r\n            }\r\n        case DELETE_POST:\r\n            return {\r\n                ...state,\r\n                postsData: state.postsData.filter(post => post.id !== action.postId)\r\n            }\r\n        case SET_PROFILE:\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        case SET_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\n// actions\r\nexport const addPostAC = (newPostText: string) => ({type: ADD_POST, newPostText} as const)\r\nexport const deletePostAC = (postId: string) => ({type: DELETE_POST, postId} as const)\r\nexport const setProfileAC = (profile: ProfilePageType) => ({type: SET_PROFILE, profile} as const)\r\nexport const setStatusAC = (status: string) => ({type: SET_STATUS, status} as const)\r\n\r\n\r\n// thunks\r\nexport const getUserProfileTC = (userId: string) => async (dispatch: Dispatch) => {\r\n    let response = await profileAPI.getProfile(userId)\r\n    dispatch(setProfileAC(response))\r\n}\r\nexport const getUserStatusTC = (userId: string) => async (dispatch: Dispatch) => {\r\n    let response = await profileAPI.getUserStatus(userId)\r\n    dispatch(setStatusAC(response))\r\n}\r\nexport const updateStatusTC = (status: string) => async (dispatch: Dispatch) => {\r\n    let response = await profileAPI.updateStatus(status)\r\n    if (response.resultCode === 0) {\r\n        dispatch(setStatusAC(status))\r\n    }\r\n}\r\n\r\n"],"sourceRoot":""}