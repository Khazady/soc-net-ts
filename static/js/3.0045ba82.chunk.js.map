{"version":3,"sources":["components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/ProfileInfo/ProfileStatus.tsx","components/Profile/ProfileInfo/ProfileDataForm.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/AddPostForm/AddPostForm.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/MyPosts/MyPostsContainer.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx"],"names":["module","exports","ProfileStatus","props","useEffect","setStatus","status","useState","editMode","setEditMode","onChange","e","currentTarget","value","autoFocus","onBlur","updateUserStatus","onDoubleClick","ProfileDataReduxForm","reduxForm","form","handleSubmit","error","profile","onSubmit","className","classes","formSummaryError","Field","placeholder","name","validate","component","Input","type","Textarea","Object","keys","contacts","map","key","ProfileData","isOwner","onClick","goToEditMode","fullName","lookingForAJob","lookingForAJobDescription","aboutMe","contactTitle","contactValue","Contact","ProfileInfo","Preloader","descriptionBlock","src","photos","large","userPhoto","mainPhoto","alt","files","length","selectedFile","target","item","updatePhoto","updateStatus","initialValues","formData","updateProfile","then","Post","id","message","likesCount","maxLength10","maxLengthCreator","AddPostFormRedux","required","MyPosts","React","memo","console","log","post","postsData","reverse","postsBlock","values","addPost","newPostText","posts","connect","state","profilePage","dispatch","addPostAC","Profile","MyPostsContainer","ProfileContainer","document","title","userId","this","match","params","authorizedUserId","toString","getUserProfile","getStatus","refreshProfile","prevProps","prevState","Component","compose","withAuthRedirect","withRouter","auth","isAuth"],"mappings":"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","file":"static/js/3.0045ba82.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__3qxPW\",\"mainPhoto\":\"ProfileInfo_mainPhoto__1Nvkd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__3zf98\",\"posts\":\"MyPosts_posts__2ZcJR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__1evpY\"};","import React, {ChangeEvent, useEffect, useState} from 'react';\r\n\r\ntype ProfileStatusType = {\r\n    status: string\r\n    updateUserStatus: (status: string) => void\r\n}\r\n\r\nexport const ProfileStatus: React.FC<ProfileStatusType> = (props) => {\r\n    //синхронизируй компоненту с состоянием, когда меняется props.status\r\n    useEffect(() => setStatus(props.status), [props.status])\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true)\r\n    }\r\n\r\n    const deactivateEditMode = () => {\r\n        setEditMode(false)\r\n        //отправляем в глобал стейт и на сервак, выходя из editMode\r\n        props.updateUserStatus(status)\r\n    }\r\n    const onStatusChange = (e: ChangeEvent<HTMLInputElement>) => setStatus(e.currentTarget.value)\r\n    const [editMode, setEditMode] = useState(false)\r\n    const [status, setStatus] = useState(props.status)\r\n    return (\r\n      <>\r\n          <b>Status: </b>\r\n          {editMode\r\n            ? <span>\r\n                <input onChange={onStatusChange} autoFocus onBlur={deactivateEditMode}\r\n                       value={status}/>\r\n            </span>\r\n            : <span>\r\n                <span onDoubleClick={activateEditMode}>{props.status || \"empty status\"}</span>\r\n            </span>}\r\n      </>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {Input, Textarea} from \"../../common/FormsWithValidationErrors/FormsWithValidationErrors\";\r\nimport {profileServerType} from \"../ProfileContainer\";\r\nimport classes from \"../../common/FormsWithValidationErrors/FormsWithValidationErrors.module.css\";\r\n\r\ntype ProfileDataFormPropsType = {\r\n    profile: profileServerType\r\n}\r\n\r\n// fix types\r\nconst ProfileDataForm: React.FC<InjectedFormProps<profileServerType, ProfileDataFormPropsType> & ProfileDataFormPropsType> = ({handleSubmit, error, profile}) => (\r\n  <form onSubmit={handleSubmit}>\r\n      <button>Save changes</button>\r\n      {error && <div className={classes.formSummaryError}>{error}</div>}\r\n      <ul>\r\n          <li><b>Full name</b>: <Field placeholder=\"Full name\" name='fullName' validate={[]} component={Input}/></li>\r\n          <li><b>Looking for a job</b>: <Field component={Input} name=\"lookingForAJob\" type=\"checkbox\"/></li>\r\n          <li><b>My skills</b>: <Field placeholder='My skills' name='lookingForAJobDescription' validate={[]}\r\n                                       component={Textarea}/></li>\r\n          <li><b>About Me</b>: <Field placeholder='About me' name='aboutMe' validate={[]} component={Textarea}/></li>\r\n          <li>\r\n              <b>Contacts</b>:\r\n              <ul>\r\n                  {Object.keys(profile.contacts).map(key => {\r\n                      //мапимся по массиву ключей, в тайтле сам ключ, в валуе обращаемся через индекс obj[\"key\"]\r\n                      return <li key={key}><b>{key}: </b><Field placeholder={key} component={Input} name={'contacts.' + key}/></li>\r\n                  })}\r\n              </ul>\r\n          </li>\r\n      </ul>\r\n  </form>\r\n);\r\n\r\n//HOC, оборачиваем им форму\r\nexport const ProfileDataReduxForm = reduxForm<profileServerType ,ProfileDataFormPropsType>(\r\n  //имя для этой формы\r\n  {form: 'edit-profile'}\r\n)(ProfileDataForm)","import React, {ChangeEvent, useState} from 'react';\r\nimport classes from \"./ProfileInfo.module.css\";\r\nimport {Preloader} from \"../../common/Preloader/Preloader\";\r\nimport {ProfileStatus} from './ProfileStatus';\r\nimport userPhoto from \"../../../assets/images/default-user-avatar.svg\";\r\nimport {ProfileDataReduxForm} from \"./ProfileDataForm\";\r\nimport {profileServerType} from '../ProfileContainer';\r\n\r\nexport type ContactsType = {\r\n    github: string\r\n    vk: string\r\n    facebook: string\r\n    instagram: string\r\n    twitter: string\r\n    website: string\r\n    youtube: string\r\n    mainLink: string\r\n}\r\nexport type ProfileFormDataType = {\r\n    fullName: string | null\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string | null\r\n    aboutMe: string | null\r\n    contacts: ContactsType\r\n}\r\n\r\ntype PropsType = {\r\n    profile: profileServerType | null\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    isOwner: boolean\r\n    updatePhoto: (file: File | null | undefined) => void\r\n    updateProfile: (profile: profileServerType) => Promise<any>\r\n}\r\n\r\nconst ProfileInfo = ({profile, ...props}: PropsType) => {\r\n    const [editMode, setEditMode] = useState(false);\r\n    //наш профиль в иниц стейте = null, поэтому когда он null рисуем колесо\r\n    if (!profile) {\r\n        return <Preloader/>\r\n    }\r\n    //вызов санки когда выбираем фото\r\n    const MainPhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\r\n        if (e.currentTarget.files?.length) {\r\n            const selectedFile = e.target.files?.item(0)\r\n            props.updatePhoto(selectedFile)\r\n        }\r\n    }\r\n    //сюда придет инфа по инпутам, собранная handleSubmit {aboutMe: 'что ввел', lookingFAJ: true} и тд\r\n    const onSubmit = (formData: profileServerType) => {\r\n        props.updateProfile(formData).then(() => setEditMode(false))\r\n    }\r\n    return (\r\n      <div>\r\n          <div className={classes.descriptionBlock}>\r\n              <img src={profile.photos.large || userPhoto} className={classes.mainPhoto} alt={\"something wrong\"}/>\r\n              <div>{props.isOwner ? <input type='file' onChange={MainPhotoSelected}/> : null}</div>\r\n              <ProfileStatus status={props.status} updateUserStatus={props.updateStatus}/>\r\n          </div>\r\n          {editMode\r\n            ? <ProfileDataReduxForm initialValues={profile} onSubmit={onSubmit} profile={profile}/>\r\n            : <ProfileData profile={profile} isOwner={props.isOwner}\r\n                           goToEditMode={() => setEditMode(true)}\r\n            />}\r\n      </div>\r\n    )\r\n};\r\n\r\ntype ProfileDataPropsType = {\r\n    profile: profileServerType\r\n    isOwner: boolean\r\n    goToEditMode: () => void\r\n}\r\nconst ProfileData: React.FC<ProfileDataPropsType> = ({profile, ...props}) => {\r\n    return <>\r\n        {props.isOwner && <button onClick={props.goToEditMode}>Edit</button>}\r\n        <ul>\r\n            <li><b>Full name</b>: {profile.fullName}</li>\r\n            <li><b>Looking for a job</b>: {profile.lookingForAJob ? 'yes' : 'no'}</li>\r\n            {profile.lookingForAJob && <li><b>My skills</b>: {profile.lookingForAJobDescription}</li>}\r\n            <li><b>About Me</b>: {profile.aboutMe}</li>\r\n            <li>\r\n                <b>Contacts</b>:\r\n                <ul>\r\n                    {Object.keys(profile.contacts).map(key => {\r\n                        //мапимся по массиву ключей, в тайтле сам ключ, в валуе обращаемся через индекс obj[\"key\"]\r\n                        return <Contact contactTitle={key} contactValue={profile.contacts[key as keyof ContactsType]} key={key}/>\r\n                    })}\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n    </>\r\n}\r\n\r\ntype ContactPropsType = {\r\n    contactTitle: string\r\n    contactValue: string | null\r\n}\r\nexport const Contact: React.FC<ContactPropsType> = (props) => (\r\n  <li><b>{props.contactTitle}</b>: {props.contactValue}</li>\r\n)\r\nexport default ProfileInfo;","import classes from \"../Post/Post.module.css\";\r\nimport React from \"react\";\r\nimport { PostTypes } from \"../../../../redux/profile-reducer\";\r\n\r\nconst Post = (props: PostTypes) => {\r\n  return (\r\n    <div key={props.id} className={classes.item}>\r\n      <img src=\"https://i.ibb.co/0t8zmD0/pngwing-com.png\" alt=\"avatar\" />\r\n      {props.message}\r\n      <div>\r\n        <span>{props.likesCount} likes</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Post;\r\n","import React from \"react\";\r\nimport {Field, reduxForm} from \"redux-form\";\r\n//validator for Field from another file\r\nimport {maxLengthCreator, required} from \"../../../../utils/validators\";\r\nimport {Textarea} from \"../../../common/FormsWithValidationErrors/FormsWithValidationErrors\";\r\n\r\n//вызываем за компонентой, т.к. каждый раз приходит новая функция и зацикливается перерисовка(нет useCallback)\r\nconst maxLength10 = maxLengthCreator(10)\r\n\r\nconst AddPostForm: React.FC = (props: any) => {\r\n    return <form onSubmit={props.handleSubmit}>\r\n        <Field component={Textarea} name='newPostText' placeholder=\"Type a new post\" validate={[required, maxLength10]}/>\r\n        <button>Add post</button>\r\n    </form>\r\n}\r\n\r\nexport const AddPostFormRedux = reduxForm({\r\n    form: \"addPostForm\"\r\n})(AddPostForm)","import React from \"react\";\r\nimport classes from \"./MyPosts.module.css\";\r\nimport Post from \"./Post/Post\";\r\nimport {PostTypes} from \"../../../redux/profile-reducer\";\r\nimport {AddPostFormRedux} from \"./AddPostForm/AddPostForm\";\r\n\r\ntype MyPostsPropsType = {\r\n    postsData: Array<PostTypes>\r\n    addPost: (newPostText: string) => void\r\n};\r\n\r\nconst MyPosts: React.FC<MyPostsPropsType> = React.memo((props) => {\r\n    console.log(\"Render\")\r\n    let addNewPost = (values: any) => {\r\n        props.addPost(values.newPostText)\r\n    }\r\n    let post = [...props.postsData]\r\n      //reverse мутабельный метод массива(не делает копию, а меняет изначальный массив по ссылке)\r\n      //поэтому создаем копию\r\n      .reverse()\r\n      .map(post =>\r\n        <Post id={post.id}\r\n              key={post.id}\r\n              message={post.message}\r\n              likesCount={post.likesCount}/>)\r\n    return (\r\n      <div className={classes.postsBlock}>\r\n          <h3>My Posts</h3>\r\n          <AddPostFormRedux onSubmit={addNewPost}/>\r\n          <div className={classes.posts}>{post}</div>\r\n      </div>\r\n    );\r\n});\r\n\r\nexport default MyPosts;\r\n","import {addPostAC} from \"../../../redux/profile-reducer\";\r\nimport MyPosts from \"./MyPosts\";\r\nimport {connect} from \"react-redux\";\r\nimport {ActionsType, RootStateType} from \"../../../redux/redux-store\";\r\n\r\n\r\nlet mapStateToProps = (state: RootStateType) => {\r\n    return {\r\n        postsData: state.profilePage.postsData,\r\n        //перерисуйся, когда что-то из этого изменится\r\n    }\r\n}\r\nlet mapDispatchToProps = (dispatch: (action: ActionsType) => void) => {\r\n    return {\r\n        addPost: (newPostText: string) => {\r\n            dispatch(addPostAC(newPostText))\r\n        },\r\n    }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps) (MyPosts);\r\n","import React from \"react\";\r\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo\";\r\nimport MyPostsContainer from \"./MyPosts/MyPostsContainer\";\r\nimport {profileServerType} from \"./ProfileContainer\";\r\n\r\ntype PropsType = {\r\n    profile: profileServerType\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    isOwner: boolean\r\n    updatePhoto: (photo: File | null | undefined) => void\r\n    updateProfile: (profile: profileServerType) => Promise<any>\r\n}\r\n\r\nconst Profile: React.FC<PropsType> = (props) => {\r\n    return (\r\n      <div>\r\n          <ProfileInfo isOwner={props.isOwner} profile={props.profile} status={props.status}\r\n                       updateStatus={props.updateStatus}\r\n                       updatePhoto={props.updatePhoto} updateProfile={props.updateProfile}/>\r\n          <MyPostsContainer/>\r\n      </div>\r\n    );\r\n};\r\n\r\nexport default Profile;\r\n","import React from \"react\";\r\nimport Profile from \"./Profile\";\r\nimport {connect} from \"react-redux\";\r\nimport {RootStateType} from \"../../redux/redux-store\";\r\nimport {\r\n    getUserProfile,\r\n    getStatus,\r\n    updateStatus,\r\n    updatePhoto,\r\n    updateProfile\r\n} from \"../../redux/profile-reducer\";\r\nimport {RouteComponentProps, withRouter} from \"react-router-dom\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\nimport {ProfileFormDataType} from \"./ProfileInfo/ProfileInfo\";\r\n\r\n//типы объектов с серва (то, что должен возвращать MStP\r\ntype profileContactsServerType = {\r\n    github: string | null\r\n    vk: string | null\r\n    facebook: string | null\r\n    instagram: string | null\r\n    twitter: string | null\r\n    website: string | null\r\n    youtube: string | null\r\n    mainLink: string | null\r\n}\r\ntype profilePhotosServerType = {\r\n    small: string | null\r\n    large: string | null\r\n}\r\nexport type profileServerType = {\r\n    aboutMe: string | null\r\n    userId: number\r\n    lookingForAJob: boolean\r\n    lookingForAJobDescription: string | null\r\n    fullName: string\r\n    contacts: profileContactsServerType\r\n    photos: profilePhotosServerType\r\n}\r\nexport type MapStateToPropsForRedirectType = {\r\n    isAuth: boolean\r\n}\r\ntype MapPropsType = ReturnType<typeof mapStateToProps>\r\ntype DispatchPropsType = {\r\n    getUserProfile: (userId: string) => void\r\n    getStatus: (userId: string) => void\r\n    updateStatus: (status: string) => void\r\n    updatePhoto: (photo: File | null | undefined) => void\r\n    updateProfile: (changedProfile: profileServerType) => Promise<any>\r\n}\r\ntype PathParamType = {\r\n    userId: string | undefined\r\n}\r\ntype PropsType = RouteComponentProps<PathParamType> & MapPropsType & DispatchPropsType\r\n\r\n\r\n//1-ый контейнер для AJAX запросов, setInterval и т.д. (грязной работы), рисует презентационную\r\nclass ProfileContainer extends React.Component<PropsType> {\r\n    refreshProfile() {\r\n        document.title = \"Profile\";\r\n        //айди из URL (withRouter, Route)\r\n        let userId = this.props.match.params.userId;\r\n        //если параметра userId нет (url выглядит как /profile/), то вставить айди, пришедший с сервака\r\n        //если и он null, то \"\" (временно)\r\n        if (!userId) {\r\n            userId = this.props.authorizedUserId ? this.props.authorizedUserId.toString() : \"\"\r\n        }\r\n        this.props.getUserProfile(userId);\r\n        this.props.getStatus(userId);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refreshProfile()\r\n    }\r\n\r\n    componentDidUpdate(prevProps: PropsType, prevState: PropsType) {\r\n        //чтобы компонента обновлялась, если после вмонтирования меняем юзера\r\n        if (this.props.match.params.userId !== prevProps.match.params.userId) {\r\n            this.refreshProfile()\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n        //копирует и передает все пропсы\r\n        return <Profile {...this.props}\r\n                        profile={this.props.profile}\r\n                        status={this.props.status}\r\n                        updateStatus={this.props.updateStatus}\r\n          //если нет userId, то owner страницы (для показа кнопки загрузки фото)\r\n                        isOwner={!this.props.match.params.userId}\r\n                        updatePhoto={this.props.updatePhoto}\r\n        />\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state: RootStateType) => {\r\n    return ({\r\n        profile: state.profilePage.profile,\r\n        status: state.profilePage.status,\r\n        authorizedUserId: state.auth.userId,\r\n        isAuth: state.auth.isAuth\r\n    })\r\n}\r\n/*let mapDispatchToProps = (dispatch: any): DispatchPropsType => ({\r\n    getUserProfile: (userId) => {\r\n        dispatch(getUserProfileTC(userId))\r\n    },\r\n    getStatus: (userId) => {\r\n        dispatch(getUserStatusTC(userId))\r\n    },\r\n    updateStatus: (status) => {\r\n        dispatch(updateStatusTC(status))\r\n    },\r\n    updatePhoto: (photo => {\r\n        dispatch(updatePhotoTC(photo))\r\n    }),\r\n    updateProfile: (changedProfile => {\r\n        dispatch(updateProfileTC(changedProfile))\r\n    })\r\n})*/\r\n\r\nexport default compose(\r\n  withAuthRedirect,\r\n  withRouter,\r\n  connect(mapStateToProps, {getUserProfile, getStatus, updateStatus, updatePhoto, updateProfile})\r\n)(ProfileContainer)"],"sourceRoot":""}